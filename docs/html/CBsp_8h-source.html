<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MarSTDv2004: CBsp.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">marstd2</a></div>
<h1>CBsp.h</h1><a href="CBsp_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef __cBSP_h__</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define __cBSP_h__</span>
00003 <span class="preprocessor"></span>
00005 <span class="comment">// MarSTD version 2004 - (c)2004 - Marcel Smit                      //</span>
00006 <span class="comment">//                                                                  //</span>
00007 <span class="comment">// Marcel_Smit_101@hotmail.com                                      //</span>
00008 <span class="comment">// marcel.athlon@hccnet.nl                                          //</span>
00009 <span class="comment">//                                                                  //</span>
00010 <span class="comment">// This code may not be used in a commercial product without my     //</span>
00011 <span class="comment">// permission. If you redistribute it, this message must remain     //</span>
00012 <span class="comment">// intact. If you use this code, some acknowledgement would be      //</span>
00013 <span class="comment">// appreciated. ;-)                                                 //</span>
00015 <span class="comment"></span>
00017 
00018 
00019 
00020 <span class="preprocessor">#include "CDebug.h"</span>
00021 <span class="preprocessor">#include "<a class="code" href="CVector_8h.html">CVector.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="CPlane_8h.html">CPlane.h</a>"</span>
00023 <span class="preprocessor">#include "<a class="code" href="CPoly_8h.html">CPoly.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="CSphere_8h.html">CSphere.h</a>"</span>
00025 
00026 <span class="comment">//#define BSP_ALTERNATE_CANCEL  ///&lt; If uncommented, an alternate 'bail out method' will be used. This bail out method will not create a complete BSP, in that it will gaurantee full front-to-back sorting. Polygons that are not coplanar might end up in the same leaf node.</span>
<a name="l00027"></a><a class="code" href="CBsp_8h.html#a0">00027</a> <span class="preprocessor">#define BSP_USE_SPHERES       </span>
<a name="l00028"></a><a class="code" href="CBsp_8h.html#a1">00028</a> <span class="preprocessor">#define BSP_DEFAULT_EPS 0.001 </span>
00029 <span class="preprocessor"></span>
00030 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="structCBspSplitInfo.html">00033</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00034 <span class="keyword"></span>{
00035 
<a name="l00036"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo0">00036</a>         <a class="code" href="classCPlane.html">CPlane</a> plane; 
<a name="l00037"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo1">00037</a>         <span class="keywordtype">int</span> planeFlipped; 
00038 
<a name="l00039"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo2">00039</a>         <span class="keywordtype">int</span> fc; 
<a name="l00040"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo3">00040</a>         <span class="keywordtype">int</span> bc; 
<a name="l00041"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo4">00041</a>         <span class="keywordtype">int</span> dc; 
<a name="l00042"></a><a class="code" href="structCBspSplitInfo.html#CBspSplitInfoo5">00042</a>         <span class="keywordtype">int</span> sc; 
00043 
00044 } <a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>;
00045 
<a name="l00049"></a><a class="code" href="structCBspPolyData.html">00049</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00050 <span class="keyword"></span>{
00051 
<a name="l00052"></a><a class="code" href="structCBspPolyData.html#CBspPolyDatao0">00052</a>         <span class="keywordtype">void</span>* data;                     
<a name="l00053"></a><a class="code" href="structCBspPolyData.html#CBspPolyDatao1">00053</a>         <a class="code" href="classCSphere.html">CSphere</a> sphere;         
00054         
00055 } <a class="code" href="structCBspPolyData.html">CBspPolyData</a>;
00056 
00058 
<a name="l00092"></a><a class="code" href="classCBsp.html">00092</a> <span class="keyword">class </span><a class="code" href="classCBsp.html">CBsp</a> : <span class="keyword">public</span> <a class="code" href="classCMesh.html">CMesh</a>
00093 {
00094 
00095         <span class="keyword">public</span>:
00096 
00097         <a class="code" href="classCBsp.html">CBsp</a>();
00098         ~<a class="code" href="classCBsp.html">CBsp</a>();
00099 
00100         <span class="keyword">public</span>:
00101 
<a name="l00102"></a><a class="code" href="classCBsp.html#CBspo0">00102</a>         <a class="code" href="classCPlane.html">CPlane</a> <a class="code" href="classCBsp.html#CBspo0">plane</a>;           
00103         <span class="keywordtype">int</span> planeFlipped;
<a name="l00104"></a><a class="code" href="classCBsp.html#CBspo2">00104</a>         <a class="code" href="classCBsp.html">CBsp</a>* <a class="code" href="classCBsp.html#CBspo2">child</a>[2];         
00105         <a class="code" href="classCBsp.html">CBsp</a>* parent;
<a name="l00106"></a><a class="code" href="classCBsp.html#CBspo4">00106</a>         <span class="keywordtype">float</span> <a class="code" href="classCBsp.html#CBspo4">eps</a>;                      
00107         
<a name="l00108"></a><a class="code" href="classCBsp.html#CBspo5">00108</a>         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspo5">initialized</a>;                
<a name="l00109"></a><a class="code" href="classCBsp.html#CBspo6">00109</a>         <a class="code" href="structCBspPolyData.html">CBspPolyData</a>* <a class="code" href="classCBsp.html#CBspo6">polyData</a>; 
<a name="l00110"></a><a class="code" href="classCBsp.html#CBspo8">00110</a>         <a class="code" href="classCVector.html">CVector</a> mins, <a class="code" href="classCBsp.html#CBspo8">maxs</a>;             
<a name="l00111"></a><a class="code" href="classCBsp.html#CBspo9">00111</a>         <a class="code" href="classCSphere.html">CSphere</a> <a class="code" href="classCBsp.html#CBspo9">sphere</a>;                 
<a name="l00112"></a><a class="code" href="classCBsp.html#CBspo10">00112</a>         <span class="keywordtype">float</span> <a class="code" href="classCBsp.html#CBspo10">volume</a>;                   
<a name="l00113"></a><a class="code" href="classCBsp.html#CBspo11">00113</a>         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspo11">noSplittingPlane</a>;   
00114  
00115         <span class="keyword">public</span>:
00116 
00120         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa2">coplanar</a>();
00126         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa3">move</a>(<a class="code" href="classCPoly.html">CPoly</a>* poly, <a class="code" href="classCBsp.html">CBsp</a>* bsp);
00132         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa4">onFront</a>(<a class="code" href="classCPoly.html">CPoly</a>* poly, <span class="keywordtype">int</span> bias = 0);
00138         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa5">onBack</a>(<a class="code" href="classCPoly.html">CPoly</a>* poly, <span class="keywordtype">int</span> bias = 0);
00146         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa6">getSplitInfo</a>(<a class="code" href="classCPlane.html">CPlane</a>&amp; p, <a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>&amp; i, <span class="keywordtype">int</span> flip);
00152         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa7">test</a>(<a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i1, <a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i2);
00158         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa8">test1</a>(<a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i1, <a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i2);
00164         <span class="keywordtype">int</span> <a class="code" href="classCBsp.html#CBspa9">test2</a>(<a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i1, <a class="code" href="structCBspSplitInfo.html">CBspSplitInfo</a>* i2);
00168         <a class="code" href="classCPlane.html">CPlane</a> <a class="code" href="classCBsp.html#CBspa10">getSplitPlane</a>();
00173         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa12">split</a>(<a class="code" href="classCPoly.html">CPoly</a>* poly);
00177         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa12">split</a>();                                                   <span class="comment">// Splits / Moves all polys.</span>
00182 <span class="comment"></span>        <a class="code" href="classCSphere.html">CSphere</a> <a class="code" href="classCBsp.html#CBspa13">getBoundingSphere</a>(<a class="code" href="classCPoly.html">CPoly</a>* poly);
00183         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa14">initBoundingSpheres</a>(); 
00184         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa15">freeBoundingSpheres</a>(); 
00185         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa16">restorePolyData</a>(); 
00186 
00189         <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa17">initBoundingBox</a>();
00190         
00191         <span class="keyword">public</span>:
00192         
00196     <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa18">getHitLeafs</a>(<a class="code" href="classCVector.html">CVector</a> point, std::vector&lt;CBsp*&gt;* bspArray);
00200     <span class="keywordtype">void</span> <a class="code" href="classCBsp.html#CBspa18">getHitLeafs</a>(<a class="code" href="classCSphere.html">CSphere</a> sohere, std::vector&lt;CBsp*&gt;* bspArray);
00201      
00202 
00203 };
00204 
00205 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Feb 8 21:59:02 2005 for MarSTDv2004 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
