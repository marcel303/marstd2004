<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MarSTDv2004: CMatrix.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">marstd2</a></div>
<h1>CMatrix.h</h1><a href="CMatrix_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef __CMatrix_h__</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define __CMatrix_h__</span>
00003 <span class="preprocessor"></span>
00005 <span class="comment">// MarSTD version 2004 - (c)2004 - Marcel Smit                      //</span>
00006 <span class="comment">//                                                                  //</span>
00007 <span class="comment">// Marcel_Smit_101@hotmail.com                                      //</span>
00008 <span class="comment">// marcel.athlon@hccnet.nl                                          //</span>
00009 <span class="comment">//                                                                  //</span>
00010 <span class="comment">// This code may not be used in a commercial product without my     //</span>
00011 <span class="comment">// permission. If you redistribute it, this message must remain     //</span>
00012 <span class="comment">// intact. If you use this code, some acknowledgement would be      //</span>
00013 <span class="comment">// appreciated. ;-)                                                 //</span>
00015 <span class="comment"></span>
00017 
00018 
00019 
00020 <span class="comment">// FIXME: Use custom matrix functions, not Allegro's ones.</span>
00021 <span class="comment">// FIXME: Use degress instead of radians? (OpenGL like).</span>
00022 <span class="comment">// FIXME: Use true 4x4 matrix, not allegro hack. Same ordering as OpenGL.</span>
00023 
00024 <span class="preprocessor">#include "<a class="code" href="CMath_8h.html">CMath.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="CVector_8h.html">CVector.h</a>"</span>
00026 
00027 <span class="comment">//---------------------------------------------------------------------------</span>
00028 
<a name="l00029"></a><a class="code" href="CMatrix_8h.html#a0">00029</a> <span class="preprocessor">#define MATRIX_STACK_SIZE 10 </span>
00030 <span class="preprocessor"></span>
00031 <span class="preprocessor"></span><span class="comment">//---------------------------------------------------------------------------</span>
00032 
<a name="l00034"></a><a class="code" href="classCMatrix3.html">00034</a> <span class="keyword">class </span><a class="code" href="classCMatrix3.html">CMatrix3</a>
00035 {
00036 
00037         <span class="keyword">public</span>:
00038 
00039         <a class="code" href="classCMatrix3.html">CMatrix3</a>();
00040         ~<a class="code" href="classCMatrix3.html">CMatrix3</a>();
00041 
00042         <span class="keyword">public</span>:
00043 
<a name="l00044"></a><a class="code" href="classCMatrix3.html#CMatrix3o0">00044</a>         <span class="keywordtype">float</span> <a class="code" href="classCMatrix3.html#CMatrix3o0">v</a>[9]; 
00045 
00046         <span class="keyword">public</span>:
00047 
00048         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a2">makeIdentity</a>(); 
00049         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a3">transpose</a>(); 
00050         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a4">makeXRotation</a>(<span class="keywordtype">float</span> r); 
00051         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a5">makeYRotation</a>(<span class="keywordtype">float</span> r); 
00052         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a6">makeZRotation</a>(<span class="keywordtype">float</span> r); 
00053         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a7">makeRotation</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z); 
00054         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a8">makeScaling</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z); 
00055     <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a9">mul</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span>* xout, <span class="keywordtype">float</span>* yout, <span class="keywordtype">float</span>* zout); 
00056     <a class="code" href="classCVector.html">CVector</a> <a class="code" href="classCMatrix3.html#CMatrix3a9">mul</a>(<a class="code" href="classCVector.html">CVector</a>&amp; vector, <a class="code" href="classCVector.html">CVector</a>&amp; out); 
00057     <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a9">mul</a>(<a class="code" href="classCMatrix3.html">CMatrix3</a>&amp; matrix); 
00058 
00059         <span class="keyword">public</span>:
00060 
00061         <span class="keywordtype">float</span> <a class="code" href="classCMatrix3.html#CMatrix3a12">determinant</a>(); 
00062         <span class="keywordtype">void</span> <a class="code" href="classCMatrix3.html#CMatrix3a13">invert</a>(); 
00063         
00064         <span class="keyword">public</span>:
00065  
00066         <span class="keywordtype">float</span>&amp; <a class="code" href="classCMatrix3.html#CMatrix3a14">operator()</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y); 
00067         <a class="code" href="classCVector.html">CVector</a> <a class="code" href="classCMatrix3.html#CMatrix3a15">operator*</a>(<a class="code" href="classCVector.html">CVector</a>&amp; vector); 
00068         <a class="code" href="classCMatrix3.html">CMatrix3</a>&amp; <a class="code" href="classCMatrix3.html#CMatrix3a16">operator*=</a>(<a class="code" href="classCMatrix3.html">CMatrix3</a>&amp; matrix); 
00069 
00070 };
00071 
00072 <span class="preprocessor">#include "<a class="code" href="CMatrix4_8h.html">CMatrix4.h</a>"</span>
00073 
00074 <span class="comment">//---------------------------------------------------------------------------</span>
00075 
00077 
<a name="l00111"></a><a class="code" href="classCMatrix.html">00111</a> <span class="keyword">class </span><a class="code" href="classCMatrix.html">CMatrix</a>
00112 {
00113 
00114         <span class="keyword">public</span>:
00115  
00116         <a class="code" href="classCMatrix.html">CMatrix</a>()
00117         {
00118                 <a class="code" href="classCMatrix.html#CMatrixo1">depth</a> = 0;
00119                 <a class="code" href="classCMatrix.html#CMatrixa5">identity</a>();
00120         } 
00121         ~<a class="code" href="classCMatrix.html">CMatrix</a>()
00122         {
00123         
00124         }
00125         
00126         <span class="keyword">public</span>:
00127  
<a name="l00128"></a><a class="code" href="classCMatrix.html#CMatrixo0">00128</a>         <a class="code" href="classCMatrix4.html">CMatrix4</a> <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="CMatrix_8h.html#a0">MATRIX_STACK_SIZE</a>]; 
<a name="l00129"></a><a class="code" href="classCMatrix.html#CMatrixo1">00129</a>         <span class="keywordtype">int</span> <a class="code" href="classCMatrix.html#CMatrixo1">depth</a>; 
<a name="l00130"></a><a class="code" href="classCMatrix.html#CMatrixo2">00130</a>         <a class="code" href="classCMatrix4.html">CMatrix4</a> <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a>; 
00131         
00132         <span class="keyword">public</span>:
00133  
<a name="l00139"></a><a class="code" href="classCMatrix.html#CMatrixa2">00139</a>         <span class="keywordtype">int</span> <a class="code" href="classCMatrix.html#CMatrixa2">push</a>()
00140         {
00141                 <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>+1] = <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>];
00142                 <a class="code" href="classCMatrix.html#CMatrixo1">depth</a>++;
00143                 <span class="keywordflow">return</span> <a class="code" href="classCMatrix.html#CMatrixo1">depth</a>;
00144         } 
<a name="l00150"></a><a class="code" href="classCMatrix.html#CMatrixa3">00150</a>         <span class="keywordtype">int</span> <a class="code" href="classCMatrix.html#CMatrixa3">pop</a>()
00151         {
00152                 <a class="code" href="classCMatrix.html#CMatrixo1">depth</a>--;
00153                 <span class="keywordflow">return</span> <a class="code" href="classCMatrix.html#CMatrixo1">depth</a>;
00154         }
<a name="l00159"></a><a class="code" href="classCMatrix.html#CMatrixa4">00159</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa4">mul</a>()
00160         {
00161                 <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>] *= <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a>;
00162         }
00163         
00164         <span class="keyword">public</span>:
00165         
<a name="l00169"></a><a class="code" href="classCMatrix.html#CMatrixa5">00169</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa5">identity</a>()
00170         {
00171                 <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>].<a class="code" href="classCMatrix4.html#CMatrix4a2">makeIdentity</a>();
00172         }
<a name="l00179"></a><a class="code" href="classCMatrix.html#CMatrixa6">00179</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa6">scale</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
00180         {
00181                 <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a>.<a class="code" href="classCMatrix4.html#CMatrix4a8">makeScaling</a>(x, y, z);
00182                 <a class="code" href="classCMatrix.html#CMatrixa4">mul</a>();
00183         }
<a name="l00189"></a><a class="code" href="classCMatrix.html#CMatrixa7">00189</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa6">scale</a>(<a class="code" href="classCVector.html">CVector</a> vector)
00190         {
00191                 <a class="code" href="classCMatrix.html#CMatrixa6">scale</a>(vector[0], vector[1], vector[2]);
00192         }
<a name="l00199"></a><a class="code" href="classCMatrix.html#CMatrixa8">00199</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa8">translate</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
00200         {
00201                 <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a>.<a class="code" href="classCMatrix4.html#CMatrix4a9">makeTranslation</a>(x, y, z);
00202                 <a class="code" href="classCMatrix.html#CMatrixa4">mul</a>();
00203         }
<a name="l00209"></a><a class="code" href="classCMatrix.html#CMatrixa9">00209</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa8">translate</a>(<a class="code" href="classCVector.html">CVector</a> vector)
00210         {
00211                 <a class="code" href="classCMatrix.html#CMatrixa8">translate</a>(vector[0], vector[1], vector[2]);
00212         }
<a name="l00219"></a><a class="code" href="classCMatrix.html#CMatrixa10">00219</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa10">rotate</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
00220         {
00221                 <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a>.<a class="code" href="classCMatrix4.html#CMatrix4a7">makeRotation</a>(x, y, z);
00222                 <a class="code" href="classCMatrix.html#CMatrixa4">mul</a>();
00223         }
<a name="l00228"></a><a class="code" href="classCMatrix.html#CMatrixa11">00228</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa10">rotate</a>(<a class="code" href="classCVector.html">CVector</a> vector)
00229         {
00230                 <a class="code" href="classCMatrix.html#CMatrixa10">rotate</a>(vector[0], vector[1], vector[2]);
00231         }
<a name="l00239"></a><a class="code" href="classCMatrix.html#CMatrixa12">00239</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa12">st</a>(<span class="keywordtype">float</span> sx, <span class="keywordtype">float</span> sy, <span class="keywordtype">float</span> sz, <span class="keywordtype">float</span> tx, <span class="keywordtype">float</span> ty, <span class="keywordtype">float</span> tz)
00240         {
00241                 <a class="code" href="classCMatrix.html#CMatrixa8">translate</a>(tx, ty, tz);  
00242                 <a class="code" href="classCMatrix.html#CMatrixa6">scale</a>(sx, sy, sz);
00243         }        
<a name="l00249"></a><a class="code" href="classCMatrix.html#CMatrixa13">00249</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa13">clearRotation</a>()
00250         {
00251         
00252         }
<a name="l00258"></a><a class="code" href="classCMatrix.html#CMatrixa14">00258</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa14">clearTranslation</a>()
00259         {
00260         
00261         }
<a name="l00271"></a><a class="code" href="classCMatrix.html#CMatrixa15">00271</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa15">apply</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span>&amp; xout, <span class="keywordtype">float</span>&amp; yout, <span class="keywordtype">float</span>&amp; zout)
00272         {
00273                 <a class="code" href="classCVector.html">CVector</a> <a class="code" href="classCMatrix.html#CMatrixo2">tmp</a> = <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>] * <a class="code" href="classCVector.html">CVector</a>(x, y, z);
00274                 xout = tmp[0];
00275                 yout = tmp[1];
00276                 zout = tmp[2];                  
00277         }
<a name="l00283"></a><a class="code" href="classCMatrix.html#CMatrixa16">00283</a>         <span class="keywordtype">void</span> <a class="code" href="classCMatrix.html#CMatrixa15">apply</a>(<a class="code" href="classCVector.html">CVector</a>&amp; v, <a class="code" href="classCVector.html">CVector</a>&amp; vout)
00284         {
00285                 vout = <a class="code" href="classCMatrix.html#CMatrixo0">m</a>[<a class="code" href="classCMatrix.html#CMatrixo1">depth</a>] * v;
00286         }
00287  
00288 };
00289 
00290 <span class="comment">//---------------------------------------------------------------------------</span>
00291 
00292 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Feb 8 21:59:02 2005 for MarSTDv2004 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
